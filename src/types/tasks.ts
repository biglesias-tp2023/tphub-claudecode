// ============================================
// TASK AREAS
// ============================================

import type { ObjectiveCategory, ObjectiveResponsible } from './strategic';

/**
 * Task area (category) from Supabase
 */
export interface TaskArea {
  id: string;
  name: string;
  slug: string;
  icon: string | null;
  color: string | null;
  displayOrder: number;
  isActive: boolean;
  createdAt: string;
}

/**
 * Task subarea from Supabase
 */
export interface TaskSubarea {
  id: string;
  areaId: string;
  name: string;
  slug: string;
  displayOrder: number;
  isActive: boolean;
  createdAt: string;
}

/**
 * Database row types
 */
export interface DbTaskArea {
  id: string;
  name: string;
  slug: string;
  icon: string | null;
  color: string | null;
  display_order: number;
  is_active: boolean;
  created_at: string;
}

export interface DbTaskSubarea {
  id: string;
  area_id: string;
  name: string;
  slug: string;
  display_order: number;
  is_active: boolean;
  created_at: string;
}

// ============================================
// TASKS
// ============================================

/**
 * Task from Supabase
 */
export interface Task {
  id: string;
  restaurantId: string;
  title: string;
  description: string | null;
  areaId: string;
  subareaId: string;
  ownerId: string | null;
  deadline: string | null;
  completedAt: string | null;
  isCompleted: boolean;
  displayOrder: number;
  createdBy: string | null;
  updatedBy: string | null;
  createdAt: string;
  updatedAt: string;
}

/**
 * Task with joined area and owner info
 */
export interface TaskWithDetails extends Task {
  areaName?: string;
  areaSlug?: string;
  subareaName?: string;
  ownerName?: string;
  ownerEmail?: string;
}

/**
 * Input for creating/updating tasks
 */
export interface TaskInput {
  restaurantId: string;
  title: string;
  description?: string;
  areaId: string;
  subareaId: string;
  ownerId?: string;
  deadline?: string;
  displayOrder?: number;
}

/**
 * Database row type for tasks
 */
export interface DbTask {
  id: string;
  restaurant_id: string;
  title: string;
  description: string | null;
  area_id: string;
  subarea_id: string;
  owner_id: string | null;
  deadline: string | null;
  completed_at: string | null;
  is_completed: boolean;
  display_order: number;
  created_by: string | null;
  updated_by: string | null;
  created_at: string;
  updated_at: string;
}

// ============================================
// STRATEGIC TASKS (linked to objectives)
// ============================================

/**
 * Strategic task from Supabase strategic_tasks table
 */
export interface StrategicTask {
  id: string;
  objectiveId: string;
  restaurantId: string;
  title: string;
  description: string | null;
  category: ObjectiveCategory;
  responsible: ObjectiveResponsible;
  assigneeId: string | null;
  clientName: string | null;
  deadline: string | null;
  isCompleted: boolean;
  completedAt: string | null;
  isAutoGenerated: boolean;
  templateKey: string | null;
  displayOrder: number;
  createdBy: string | null;
  updatedBy: string | null;
  createdAt: string;
  updatedAt: string;
}

/**
 * Strategic task with joined data for display
 */
export interface StrategicTaskWithDetails extends StrategicTask {
  objectiveTitle?: string;
  assigneeName?: string;
  assigneeAvatarUrl?: string | null;
  restaurantName?: string;
}

/**
 * Input type for creating/updating strategic tasks
 */
export interface StrategicTaskInput {
  objectiveId: string;
  restaurantId: string;
  title: string;
  description?: string;
  category: ObjectiveCategory;
  responsible: ObjectiveResponsible;
  assigneeId?: string;
  clientName?: string;
  deadline?: string;
  isAutoGenerated?: boolean;
  templateKey?: string;
  displayOrder?: number;
}

/**
 * Database row type for strategic_tasks
 */
export interface DbStrategicTask {
  id: string;
  objective_id: string;
  restaurant_id: string;
  title: string;
  description: string | null;
  category: string;
  responsible: string;
  assignee_id: string | null;
  client_name: string | null;
  deadline: string | null;
  is_completed: boolean;
  completed_at: string | null;
  is_auto_generated: boolean;
  template_key: string | null;
  display_order: number;
  created_by: string | null;
  updated_by: string | null;
  created_at: string;
  updated_at: string;
}
